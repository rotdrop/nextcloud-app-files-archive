/*! For license information please see src_files-tab_ts-97082953fe61c4f800ef.js.LICENSE.txt */
(self.webpackChunkfiles_archive=self.webpackChunkfiles_archive||[]).push([["src_files-tab_ts"],{18535:()=>{},40647:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>J});var n=a(81827),o=a(85471),s=a(76333),i=a(90087),r=a(99498),c=a(61338),l=a(21777);const u=(e,t,a)=>{let o=(0,r.Jv)("/apps/"+n.J+"/"+e,t,a);const s={...t||{}};for(const t of e.matchAll(/{([^{}]*)}/g))delete s[t[1]];const i=[];for(const[e,t]of Object.entries(s))try{i.push(e+"="+encodeURIComponent(t?.toString()||""))}catch(e){console.debug("STRING CONVERSION ERROR",e)}return i.length>0&&(o+="?"+i.join("&")),o};var v=a(18558),h=a(21616);const m=(e,t)=>{const a="/"+(t=t||(0,l.HW)().uid)+"/files";if(e.topLevelFolder!==a)throw new Error(`${e.path} is located outside of the front end user file space ${a}.`);const n={id:e.fileid,source:(0,r.dC)((0,v.join)("dav/files",t,e.relativePath)),root:`/files/${t}`,mime:e.mime,mtime:new Date(1e3*e.lastmod),owner:t,size:e.size,permissions:e.permissions,attributes:{...e,"has-preview":e.hasPreview}};return"file"===e.type?new h.ZH(n):new h.vd(n)};var p=a(83386),d=a(85168),f=a(53334),P=a(59316),x=a(82649),g=a(82396),N=a(16913),b=a(71083);const _=e=>(e=>b.A.isAxiosError(e))(e)&&!!e.response;let A=null,y=null;const w=[],C=()=>{let e=(0,o.nI)()?.proxy||null;if(y&&(e&&A===e||!e&&A))return y;for(e?A=e:e=A;e&&e.$parent&&"SidebarRoot"!==e.$options.name;)e=e?.$parent;return y=e||null,y},I=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=(()=>{const e=C();return e?.node||null})();if(t&&e)t.status=h.zI.LOADING,(0,c.Ic)("files:node:updated",t),w.push(t);else{for(const e of w)e.status=void 0,(0,c.Ic)("files:node:updated",e);w.splice(0,w.length)}};var k=a(98230);const E=(0,o.pM)({__name:"FilesTab",setup(e,t){let{expose:a}=t;I(!1);const v=(0,o.KR)(null),b=(0,o.KR)(null),A=(0,o.KR)(null),y=(0,o.KR)(0),w=(0,o.KR)(void 0),C=(0,o.EW)(()=>w.value?w.value.path+"/"+w.value.name:null),E=(0,o.EW)(()=>w.value?.id),R=(0,o.KR)(void 0),M=(0,o.KR)(void 0),J=(0,o.KR)([]),S=(0,o.KR)({}),O=(0,o.EW)(()=>Object.keys(S.value).length>0),T=(0,i.A)(),B=(0,o.KR)(!!T?.mountStripCommonPathPrefixDefault),F=(0,o.KR)(!!T?.extractStripCommonPathPrefixDefault),D=(0,o.KR)(!!T?.mountBackgroundJob),z=(0,o.KR)(!!T?.extractBackgroundJob),L=(0,o.KR)(void 0),K=(0,o.KR)(!0),U=(0,o.KR)(!1),W=(0,o.KR)(!1),j=(0,o.KR)(!1),H=(0,o.KR)(!1),$=(0,o.EW)(()=>(0,p.md5)((0,r.Jv)("")+n.J+"-open-archive-mount")),q=(0,o.Kh)({dirName:"",baseName:""}),Z=(0,o.Kh)({dirName:"",baseName:""}),Q=(0,o.EW)({get:()=>q.baseName,set:e=>((0,o.hZ)(q,"baseName",e),e)}),V=(0,o.EW)({get:()=>q.dirName,set:e=>((0,o.hZ)(q,"dirName",e),e)}),G=(0,o.EW)({get:()=>Z.baseName,set:e=>((0,o.hZ)(Z,"baseName",e),e)}),X=(0,o.EW)({get:()=>Z.dirName,set:e=>((0,o.hZ)(Z,"dirName",e),e)}),Y=(0,o.EW)(()=>V.value+(Q.value?"/"+Q.value:"")),ee=(0,o.EW)(()=>X.value+(G.value?"/"+G.value:"")),te=(0,o.EW)(()=>0===M.value?(0,f.Tl)(n.J,"ok"):2&M.value?(0,f.Tl)(n.J,"zip bomb"):1&M.value?(0,f.Tl)(n.J,"too large"):(0,f.Tl)(n.J,"unknown")),ae=(0,o.EW)(()=>J.value.length>0),ne=(0,o.EW)(()=>isNaN(parseInt(""+R.value?.originalSize))?(0,f.Tl)(n.J,"unknown"):(0,h.v7)(R.value.originalSize)),oe=(0,o.EW)(()=>isNaN(parseInt(""+R.value?.compressedSize))?(0,f.Tl)(n.J,"unknown"):(0,h.v7)(R.value.compressedSize)),se=(0,o.EW)(()=>isNaN(parseInt(""+R.value?.size))?(0,f.Tl)(n.J,"unknown"):(0,h.v7)(R.value.size)),ie=(0,o.EW)(()=>!R.value||void 0===R.value?.numberOfFiles||isNaN(parseInt(""+R.value?.numberOfFiles))?(0,f.Tl)(n.J,"unknown"):""+R.value?.numberOfFiles),re=(0,o.EW)(()=>R.value&&void 0!==R.value.commonPathPrefix?"/"+R.value.commonPathPrefix:(0,f.Tl)(n.J,"unknown")),ce=async()=>{B.value=!!T?.mountStripCommonPathPrefixDefault,F.value=!!T?.extractStripCommonPathPrefixDefault,D.value=!!T?.mountBackgroundJob,z.value=!!T?.extractBackgroundJob,C.value&&(ue(C.value),ve(C.value,!0),pe(C.value,!0))},le=async e=>{w.value=e,Q.value=w.value.name.split(".")[0],V.value=w.value.path,G.value=Q.value,X.value=V.value,ce()};a({update:le});const ue=async e=>{++y.value,e=encodeURIComponent(e);const t=u("archive/info/{fileName}",{fileName:e}),a={};L.value&&(a.passPhrase=L.value);try{const e=(await N.Ay.post(t,a)).data;if(R.value=e.archiveInfo,M.value=e.archiveStatus,e.messages)for(const t of e.messages)(0,d.cf)(t)}catch(e){if(k.A.error("ERROR",e),_(e)&&e.response.data){const t=e.response.data;if(R.value=t.archiveInfo,M.value=t.archiveStatus,t.messages)for(const e of t.messages)(0,d.Qg)(e,{timeout:d.DH})}else R.value=void 0}R.value?.defaultMountPoint&&(Q.value=R.value.defaultMountPoint),R.value?.defaultTargetBaseName&&(G.value=R.value.defaultTargetBaseName),--y.value},ve=async(e,t)=>{const a=[...J.value],n=await de(e,!1);if(J.value=n.mounts,t)return;const o=J.value.filter(e=>-1===a.findIndex(t=>e.mountPoint.fileid===t.mountPoint.fileid)),s=a.filter(e=>-1===J.value.findIndex(t=>t.mountPoint.fileid===e.mountPoint.fileid));for(const e of s){const t=m(e.mountPoint);t.attributes["is-mount-root"]=!0,(0,c.Ic)("files:node:deleted",t)}for(const e of o){const t=m(e.mountPoint);t.attributes["is-mount-root"]=!0,(0,c.Ic)("files:node:created",t)}},he=(e,t,a)=>(0,p.md5)(e+t+a),me=e=>he(e.target,e.sourcePath,e.destinationPath),pe=async(e,t)=>{!0!==t&&++y.value,e=encodeURIComponent(e);const a=u("archive/schedule/{operation}/{fileName}",{operation:"status",fileName:e});try{const e=(await N.Ay.get(a)).data,t={};for(const a of e)t[me(a)]=a;for(const e of Object.keys(S.value))t[e]||(0,o.yH)(S.value,e);for(const[e,a]of Object.entries(t))(0,o.hZ)(S.value,e,a)}catch(e){if(k.A.error("ERROR",e),_(e)&&e.response.data){const t=e.response.data;if(t.messages)for(const e of t.messages)(0,d.Qg)(e,{timeout:d.DH})}}!0!==t&&--y.value},de=async(e,t)=>{const a={mounts:[],mounted:!1};!0!==t&&++y.value,e=encodeURIComponent(e);const n=u("archive/mount/{fileName}",{fileName:e});try{const e=(await N.Ay.get(n)).data;if(a.mounts=e.mounts,a.mounted=e.mounted,e.messages)for(const t of e.messages)(0,d.cf)(t)}catch(e){if(k.A.error("ERROR",e),_(e)&&e.response.data){const t=e.response.data;if(a.mounts=t.mounts,a.mounted=t.mounted,t.messages)for(const e of t.messages)(0,d.Qg)(e,{timeout:d.DH})}}for(const e of a.mounts)!L.value&&e.archivePassPhrase&&(L.value=e.archivePassPhrase),delete e.archivePassPhrase;return!0!==t&&--y.value,a},fe=e=>{if(e?.notification?.app!==n.J)return;const t=e?.notification?.messageRichParameters?.destination;if("mount"!==t?.status)return;const a=t?.mount;if(!a)return void k.A.error("No mount info in mount notification event");let o;try{o=JSON.parse(a)}catch(t){return void k.A.error("files_archive, unable to decode mount entity",{event:e,mountData:a})}if(o.archiveFileId!==E.value)return void k.A.info("*** Archive notification for other file received",e);const s=he("mount",o.archiveFilePath,o.mountPointPath);S.value[s]&&delete S.value[s],k.A.info("*** Mount notification received, updating mount-list",t);const i=t.id,r=J.value.findIndex(e=>e.mountPoint.fileid===i);if(-1===r)try{J.value.push({...o,mountPoint:JSON.parse(t.folder)})}catch(e){k.A.error("Unable to decode mount point folder file-info record.",{destinationData:t})}},Pe=e=>{const t=e.fileid,a=J.value.findIndex(e=>e.mountPoint.fileid===t);a>=0?(k.A.info("BERFORE RENAME",{...J[a]}),(0,o.hZ)(J[a],"mountPoint",e),(0,o.hZ)(J[a],"mountPointPath",e.path),(0,o.hZ)(J[a],"mountPointPathHash",(0,p.md5)(e.path)),k.A.info("AFTER RENAME",{...J[a]})):k.A.info("RENAME OF NODE NOT FOR US",e)},xe=e=>{const t=e.fileid,a=J.value.findIndex(e=>e.mountPoint.fileid===t);a>=0?(J.value.splice(a,1),k.A.info("RECORD UNMOUNT",e)):k.A.info("DELETE OF NODE NOT FOR US",{mountPoint:e,archiveMounts:J.value})};return(0,o.KC)(()=>{(0,c.B1)("files:node:deleted",xe),(0,c.B1)("files:node:renamed",Pe),(0,c.B1)("notifications:notification:received",fe)}),(0,o.hi)(()=>{(0,c.al)("files:node:deleted",xe),(0,c.al)("files:node:renamed",Pe),(0,c.al)("notifications:notification:received",fe)}),{__sfc:!0,archivePassPhraseComponent:v,mountOptionsComponent:b,extractionOptionsComponent:A,loading:y,fileInfo:w,fileName:C,archiveFileId:E,ArchiveStatusOk:0,ArchiveStatusTooLarge:1,ArchiveStatusBomb:2,archiveInfo:R,archiveStatus:M,archiveMounts:J,pendingJobs:S,jobsArePending:O,initialState:T,archiveMountStripCommonPathPrefix:B,archiveExtractStripCommonPathPrefix:F,archiveMountBackgroundJob:D,archiveExtractBackgroundJob:z,archivePassPhrase:L,showArchiveInfo:K,showArchivePassPhrase:U,showArchiveMounts:W,showArchiveExtraction:j,showPendingJobs:H,openMountTarget:$,archiveMountFileInfo:q,archiveExtractFileInfo:Z,archiveMountBaseName:Q,archiveMountDirName:V,archiveExtractBaseName:G,archiveExtractDirName:X,archiveMountPathName:Y,archiveExtractPathName:ee,archiveStatusText:te,archiveMounted:ae,humanArchiveOriginalSize:ne,humanArchiveCompressedSize:oe,humanArchiveFileSize:se,numberOfArchiveMembers:ie,commonPathPrefix:re,isLt:(e,t)=>e<t,openMountOptionsMenu:()=>{b.value?.openMenu()},openExtractionOptionsMenu:()=>{A.value?.openMenu()},getData:ce,update:le,getArchiveInfo:ue,refreshArchiveMounts:ve,getJobIdFromOperation:he,getJobIdFromJob:me,getPendingJobs:pe,cancelPendingOperation:async e=>{const t=encodeURIComponent(C.value),a=encodeURIComponent(Y.value),s=u("archive/schedule/{operation}/{archivePath}/{mountPath}",{operation:e,archivePath:t,mountPath:a});let i={};try{i=(await N.Ay.delete(s,{})).data}catch(e){if(k.A.error("ERROR",e),_(e)){const t=[];e.response.data&&(i=e.response.data,Array.isArray(i.messages)&&t.splice(t.length,0,...i.messages)),t.length||t.push((0,f.Tl)(n.J,'Cancelling the background job failed with error {status}, "{statusText}".',{status:e.response.status,statusText:e.response.statusText}));for(const e of t)(0,d.Qg)(e,{timeout:d.DH})}}if(i.removed)for(const e of i.removed){const t=me(e);S.value[t]&&(0,o.yH)(S.value,t)}},getArchiveMounts:de,mountArchive:async()=>{const e=encodeURIComponent(C.value),t=encodeURIComponent(Y.value),a=D.value?"archive/schedule/mount/{archivePath}/{mountPath}":"archive/mount/{archivePath}/{mountPath}",o=u(a,{archivePath:e,mountPath:t});I(!0);const s={};L.value&&(s.passPhrase=L.value),s.stripCommonPathPrefix=!!B.value;try{const e=await N.Ay.post(o,s);if(!D.value){const t=e.data,a=t.mountPoint.fileid;if(-1===J.value.findIndex(e=>e.mountPoint.fileid===a)){J.value.push(t);const a=m(e.data.mountPoint);a.attributes["is-mount-root"]=!0,(0,c.Ic)("files:node:created",a)}}}catch(e){if(k.A.error("ERROR",e),_(e)){const t=[];if(e.response.data){const a=e.response.data;a.messages&&t.splice(t.length,0,...a.messages)}t.length||t.push((0,f.Tl)(n.J,'Mount request failed with error {status}, "{statusText}".',{status:e.response.status,statusText:e.response.statusText}));for(const e of t)(0,d.Qg)(e,{timeout:d.DH})}}D.value&&pe(C.value,!0),I(!1)},unmount:async e=>{const t=(0,l.HW)(),a=(0,r.dC)("dav/files/"+t.uid+e.mountPointPath);I(!0);try{await N.Ay.delete(a);const t=J.value.indexOf(e);t>=0?J.value.splice(t,1):k.A.error("UNABLE TO FIND DELETED MOUNT IN LIST",e,J);const n=m(e.mountPoint);n.attributes["is-mount-root"]=!0,(0,c.Ic)("files:node:deleted",n)}catch(e){k.A.error("ERROR",e);const t=[];if(_(e)){const a=e.response.request?.responseXML;if(a&&"error"===a.documentElement.localName&&"DAV:"===a.documentElement.namespaceURI){const e=a.getElementsByTagNameNS("http://sabredav.org/ns","message");for(const a of e)a.textContent&&t.push(a.textContent)}if(e.response.data){const a=e.response.data;a.messages&&t.splice(t.length,0,...a.messages)}t.length||t.push((0,f.Tl)(n.J,'Unmount request failed with error {status}, "{statusText}".',{status:e.response.status,statusText:e.response.statusText}));for(const e of t)(0,d.Qg)(e,{timeout:d.DH});404===e.response.status&&ve(C.value,!0)}}I(!1)},extractArchive:async()=>{const e=encodeURIComponent(C.value),t=encodeURIComponent(ee.value),a=z.value?"archive/schedule/extract/{archivePath}/{targetPath}":"archive/extract/{archivePath}/{targetPath}",o=u(a,{archivePath:e,targetPath:t});I(!0);const s={};L.value&&(s.passPhrase=L.value),s.stripCommonPathPrefix=!!F.value;try{const e=await N.Ay.post(o,s);if(!z.value){const t=m(e.data.targetFolder);t.attributes["is-mount-root"]=!0,(0,c.Ic)("files:node:created",t)}}catch(e){if(k.A.error("ERROR",e),_(e)){const t=[];if(e.response.data){const a=e.response.data;a.messages&&t.splice(t.length,0,...a.messages)}t.length||t.push((0,f.Tl)(n.J,'Archive extraction failed with error {status}, "{statusText}".',{status:e.response.status,statusText:e.response.statusText}));for(const e of t)(0,d.Qg)(e,{timeout:d.DH})}}z.value&&pe(C.value,!0),I(!1)},setPassPhrase:async()=>{const e=U.value?v.value.$el.querySelector('input[type="text"]')?.value||"":v.value.$el.querySelector('input[type="password"]')?.value||"";L.value=e;const t=encodeURIComponent(C.value),a=(0,r.Jv)("/apps/"+n.J+"/archive/mount/{archivePath}",{archivePath:t});I(!0);const o={changeSet:{archivePassPhrase:L.value}};try{await N.Ay.patch(a,o)}catch(e){if(k.A.error("ERROR",e),_(e)){const t=[];if(e.response.data){const a=e.response.data;a.messages&&t.splice(t.length,0,...a.messages)}t.length||t.push((0,f.Tl)(n.J,'Patching the passphrase failed with error {status}, "{statusText}".',{status:e.response.status,statusText:e.response.statusText}));for(const e of t)(0,d.Qg)(e,{timeout:d.DH})}}I(!1)},togglePassPhraseVisibility:async()=>{let e=U.value?v.value.$el.querySelector('input[type="text"]'):v.value.$el.querySelector('input[type="password"]');const t=e.value;U.value=!U.value,await(0,o.dY)(),e=U.value?v.value.$el.querySelector('input[type="text"]'):v.value.$el.querySelector('input[type="password"]'),e.value=t},filesAppMountPointUrl:e=>(0,r.Jv)("/apps/files")+"?dir="+encodeURIComponent(e.mountPointPath),onNotification:fe,onMountPointRenamed:Pe,onMountPointDeleted:xe,appName:n.J,t:f.Tl,NetworkOffIcon:P.A,CancelIcon:x.A,NcActionInput:s.Az,NcActionCheckbox:s.RI,NcActions:s.B6,NcActionButton:s.Ko,NcListItem:s.l,FilePrefixPicker:g.A}}});const R=(0,a(14486).A)(E,function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"files-tab"},[t("ul",[t("li",{staticClass:"files-tab-entry flex flex-center clickable",on:{click:function(e){a.showArchiveInfo=!a.showArchiveInfo}}},[t("div",{staticClass:"files-tab-entry__avatar icon-info-white"}),e._v(" "),t("div",{staticClass:"files-tab-entry__desc"},[t("h5",[e._v(e._s(a.t(a.appName,"Archive Information")))])]),e._v(" "),t(a.NcActions,[t(a.NcActionButton,{attrs:{icon:"icon-triangle-"+(a.showArchiveInfo?"n":"s")},model:{value:a.showArchiveInfo,callback:function(e){a.showArchiveInfo=e},expression:"showArchiveInfo"}})],1)],1),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:a.showArchiveInfo,expression:"showArchiveInfo"}],staticClass:"files-tab-entry"},[a.loading?t("div",{staticClass:"icon-loading-small"}):e._e(),e._v(" "),t("ul",{directives:[{name:"show",rawName:"v-show",value:!a.loading,expression:"!loading"}],staticClass:"archive-info"},[a.isLt(0,a.archiveStatus)?t(a.NcListItem,{class:{"archive-error":a.isLt(0,a.archiveStatus)},attrs:{name:a.t(a.appName,"archive status"),bold:!0,details:a.archiveStatusText},scopedSlots:e._u([{key:"icon",fn:function(){return[t("div",{staticClass:"icon-error"})]},proxy:!0}],null,!1,2833062560)}):e._e(),e._v(" "),t(a.NcListItem,{attrs:{name:a.t(a.appName,"archive format"),bold:!0,details:a.archiveInfo?.format||a.t(a.appName,"unknown"),compact:""}}),e._v(" "),t(a.NcListItem,{attrs:{name:a.t(a.appName,"MIME type"),bold:!0,details:a.archiveInfo?.mimeType||a.t(a.appName,"unknown"),compact:""}}),e._v(" "),t(a.NcListItem,{attrs:{name:a.t(a.appName,"backend driver"),bold:!0,details:a.archiveInfo?.backendDriver||a.t(a.appName,"unknown"),compact:""}}),e._v(" "),t(a.NcListItem,{attrs:{name:a.t(a.appName,"uncompressed size"),bold:!0,details:a.humanArchiveOriginalSize,compact:""}}),e._v(" "),t(a.NcListItem,{attrs:{name:a.t(a.appName,"compressed size"),bold:!0,details:a.humanArchiveCompressedSize,compact:""}}),e._v(" "),a.humanArchiveCompressedSize!==a.humanArchiveFileSize?t(a.NcListItem,{attrs:{name:a.t(a.appName,"archive file size"),bold:!0,details:a.humanArchiveFileSize,compact:""}}):e._e(),e._v(" "),t(a.NcListItem,{attrs:{name:a.t(a.appName,"# archive members"),bold:!0,details:a.numberOfArchiveMembers,compact:""}}),e._v(" "),t(a.NcListItem,{attrs:{name:a.t(a.appName,"common prefix"),bold:!0,details:a.commonPathPrefix,compact:""}}),e._v(" "),a.archiveInfo?.comment?t(a.NcListItem,{staticClass:"archive-comment",attrs:{name:a.t(a.appName,"creator's comment"),bold:!0,compact:""},scopedSlots:e._u([{key:"subtitle",fn:function(){return[e._v("\n            "+e._s(a.archiveInfo?.comment)+"\n          ")]},proxy:!0}],null,!1,3976111642)}):e._e()],1)]),e._v(" "),t("li",{staticClass:"files-tab-entry flex flex-center"},[t("div",{staticClass:"files-tab-entry__avatar icon-password-white"}),e._v(" "),t("div",{staticClass:"files-tab-entry__desc"},[t("h5",[t("span",{staticClass:"main-title"},[e._v(e._s(a.t(a.appName,"Passphrase")))]),e._v(" "),a.archivePassPhrase?e._e():t("span",{staticClass:"title-annotation"},[e._v("("+e._s(a.t(a.appName,"unset"))+")")])])]),e._v(" "),t(a.NcActions,{attrs:{"force-menu":!0}},[a.showArchivePassPhrase?t(a.NcActionInput,{ref:"archivePassPhraseComponent",attrs:{value:a.archivePassPhrase,type:"text",icon:"icon-password"},on:{submit:a.setPassPhrase}},[e._v("\n          "+e._s(a.t(a.appName,"archive passphrase"))+"\n        ")]):t(a.NcActionInput,{ref:"archivePassPhraseComponent",attrs:{value:a.archivePassPhrase,type:"password",icon:"icon-password"},on:{submit:a.setPassPhrase}},[e._v("\n          "+e._s(a.t(a.appName,"archive passphrase"))+"\n        ")]),e._v(" "),t(a.NcActionCheckbox,{on:{change:a.togglePassPhraseVisibility}},[e._v("\n          "+e._s(a.t(a.appName,"Show Passphrase"))+"\n        ")])],1)],1),e._v(" "),t("li",{staticClass:"files-tab-entry flex flex-center clickable",on:{click:function(e){a.showArchiveMounts=!a.showArchiveMounts}}},[t("div",{staticClass:"files-tab-entry__avatar icon-external-white"}),e._v(" "),t("div",{staticClass:"files-tab-entry__desc"},[t("h5",[t("span",{staticClass:"main-title"},[e._v(e._s(a.t(a.appName,"Mount Points")))]),e._v(" "),a.archiveMounted?t("span",{staticClass:"title-annotation"},[e._v("("+e._s(""+a.archiveMounts.length)+")")]):t("span",{staticClass:"title-annotation"},[e._v("("+e._s(a.t(a.appName,"not mounted"))+")")])])]),e._v(" "),t(a.NcActions,[t(a.NcActionButton,{attrs:{icon:"icon-triangle-"+(a.showArchiveMounts?"n":"s")},model:{value:a.showArchiveMounts,callback:function(e){a.showArchiveMounts=e},expression:"showArchiveMounts"}})],1)],1),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:a.showArchiveMounts,expression:"showArchiveMounts"}],staticClass:"directory-chooser files-tab-entry"},[a.loading?t("div",{staticClass:"icon-loading-small"}):a.archiveMounted?t("ul",{staticClass:"archive-mounts"},e._l(a.archiveMounts,function(n){return t(a.NcListItem,{key:n.id,attrs:{"force-display-actions":!0,bold:!1},scopedSlots:e._u([{key:"title",fn:function(){return[t("a",{directives:[{name:"tooltip",rawName:"v-tooltip",value:n.mountPointPath,expression:"mountPoint.mountPointPath"}],staticClass:"external icon-folder icon",attrs:{target:a.openMountTarget,href:a.filesAppMountPointUrl(n)}},[e._v("\n              "+e._s(n.mountPointPath)+"\n            ")])]},proxy:!0},{key:"actions",fn:function(){return[t(a.NcActionButton,{on:{click:function(e){return a.unmount(n)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(a.NetworkOffIcon,{directives:[{name:"tooltip",rawName:"v-tooltip",value:a.t(a.appName,"Disconnect storage"),expression:"t(appName, 'Disconnect storage')"}],attrs:{size:20}})]},proxy:!0}],null,!0)})]},proxy:!0},1&n.mountFlags?{key:"extra",fn:function(){return[t("div",[e._v(e._s(a.t(a.appName,"Common prefix {prefix} is stripped.",{prefix:a.commonPathPrefix})))])]},proxy:!0}:null],null,!0)})}),1):t("div",[t(a.FilePrefixPicker,{attrs:{hint:a.t(a.appName,"Not mounted, create a new mount point:"),placeholder:a.t(a.appName,"base name")},on:{submit:a.mountArchive},model:{value:a.archiveMountFileInfo,callback:function(e){a.archiveMountFileInfo=e},expression:"archiveMountFileInfo"}}),e._v(" "),t("div",{staticClass:"flex flex-center"},[t("div",{staticClass:"label",on:{click:a.openMountOptionsMenu}},[e._v("\n            "+e._s(a.t(a.appName,"Mount Options"))+"\n          ")]),e._v(" "),t(a.NcActions,{ref:"mountOptionsComponent",attrs:{"force-menu":!0}},[t(a.NcActionCheckbox,{ref:"mountStripCommonPathPrefixComponent",attrs:{checked:a.archiveMountStripCommonPathPrefix},on:{change:function(e){a.archiveMountStripCommonPathPrefix=!a.archiveMountStripCommonPathPrefix}}},[e._v("\n              "+e._s(a.t(a.appName,"strip common path prefix"))+"\n            ")]),e._v(" "),t(a.NcActionCheckbox,{ref:"mountBackgroundJobComponent",attrs:{checked:a.archiveMountBackgroundJob},on:{change:function(e){a.archiveMountBackgroundJob=!a.archiveMountBackgroundJob}}},[e._v("\n              "+e._s(a.t(a.appName,"schedule as background job"))+"\n            ")])],1)],1)],1)]),e._v(" "),t("li",{staticClass:"files-tab-entry flex flex-center clickable",on:{click:function(e){a.showArchiveExtraction=!a.showArchiveExtraction}}},[t("div",{staticClass:"files-tab-entry__avatar icon-play-white"}),e._v(" "),t("div",{staticClass:"files-tab-entry__desc"},[t("h5",[e._v(e._s(a.t(a.appName,"Extract Archive")))])]),e._v(" "),t(a.NcActions,[t(a.NcActionButton,{attrs:{icon:"icon-triangle-"+(a.showArchiveExtraction?"n":"s")},model:{value:a.showArchiveExtraction,callback:function(e){a.showArchiveExtraction=e},expression:"showArchiveExtraction"}})],1)],1),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:a.showArchiveExtraction,expression:"showArchiveExtraction"}],staticClass:"directory-chooser files-tab-entry"},[a.loading?t("div",{staticClass:"icon-loading-small"}):t("div",[t(a.FilePrefixPicker,{attrs:{hint:a.t(a.appName,"Choose a directory to extract the archive to:"),placeholder:a.t(a.appName,"basename")},on:{submit:a.extractArchive},model:{value:a.archiveExtractFileInfo,callback:function(e){a.archiveExtractFileInfo=e},expression:"archiveExtractFileInfo"}}),e._v(" "),t("div",{staticClass:"flex flex-center"},[t("div",{staticClass:"label",on:{click:a.openExtractionOptionsMenu}},[e._v("\n            "+e._s(a.t(a.appName,"Extraction Options"))+"\n          ")]),e._v(" "),t(a.NcActions,{ref:"extractionOptionsComponent",attrs:{"force-menu":!0}},[t(a.NcActionCheckbox,{attrs:{checked:a.archiveExtractStripCommonPathPrefix},on:{change:function(e){a.archiveExtractStripCommonPathPrefix=!a.archiveExtractStripCommonPathPrefix}}},[e._v("\n              "+e._s(a.t(a.appName,"strip common path prefix"))+"\n            ")]),e._v(" "),t(a.NcActionCheckbox,{ref:"extractBackgroundJobComponent",attrs:{checked:a.archiveExtractBackgroundJob},on:{change:function(e){a.archiveExtractBackgroundJob=!a.archiveExtractBackgroundJob}}},[e._v("\n              "+e._s(a.t(a.appName,"schedule as background job"))+"\n            ")])],1)],1)],1)]),e._v(" "),t("li",{staticClass:"files-tab-entry flex flex-center clickable",on:{click:function(e){a.showPendingJobs=!a.showPendingJobs}}},[t("div",{staticClass:"files-tab-entry__avatar icon-recent-white"}),e._v(" "),t("div",{staticClass:"files-tab-entry__desc"},[a.jobsArePending?t("h5",[t("span",{staticClass:"main-title"},[e._v(e._s(a.t(a.appName,"Pending Background Jobs")))]),e._v(" "),a.jobsArePending?t("span",{staticClass:"title-annotation"},[e._v("("+e._s(""+Object.keys(a.pendingJobs).length)+")")]):e._e()]):t("h5",[t("span",{staticClass:"main-title"},[e._v(e._s(a.t(a.appName,"No Pending Background Jobs")))])])]),e._v(" "),t(a.NcActions,[t(a.NcActionButton,{attrs:{icon:"icon-triangle-"+(a.showPendingJobs?"n":"s")},model:{value:a.showPendingJobs,callback:function(e){a.showPendingJobs=e},expression:"showPendingJobs"}})],1)],1),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:a.jobsArePending&&a.showPendingJobs,expression:"jobsArePending && showPendingJobs"}],staticClass:"directory-chooser files-tab-entry"},[a.loading?t("div",{staticClass:"icon-loading-small"}):a.jobsArePending?t("ul",{staticClass:"pending-jobs"},e._l(a.pendingJobs,function(n){return t(a.NcListItem,{key:n.destinationPath,attrs:{"force-display-actions":!0,bold:!1},scopedSlots:e._u([{key:"title",fn:function(){return[t("div",[e._v(e._s(n.destinationPath))])]},proxy:!0},{key:"actions",fn:function(){return[t(a.NcActionButton,{on:{click:function(e){return a.cancelPendingOperation(n.target)}},scopedSlots:e._u([{key:"icon",fn:function(){return[t(a.CancelIcon,{directives:[{name:"tooltip",rawName:"v-tooltip",value:a.t(a.appName,"Cancel Job"),expression:"t(appName, 'Cancel Job')"}],attrs:{size:20}})]},proxy:!0}],null,!0)})]},proxy:!0},n.stripCommonPathPrefix?{key:"extra",fn:function(){return[t("div",[e._v(e._s(a.t(a.appName,"Job type: {type}",{type:"mount"===n.target?a.t(a.appName,"mount"):a.t(a.appName,"extract")})))]),e._v(" "),t("div",[e._v(e._s(a.t(a.appName,"Common prefix {prefix} will be stripped.",{prefix:a.commonPathPrefix})))])]},proxy:!0}:null],null,!0)})}),1):t("div",[e._v("\n        "+e._s(a.t(a.appName,"No pending background job."))+"\n      ")])])])])},[],!1,null,"36b940a4",null).exports;o.Ay.mixin({data:()=>({appName:n.J}),methods:{t:f.Tl,n:f.zw}}),o.Ay.directive("tooltip",s.m_);const M=o.Ay.extend(R),J=e=>new M({parent:e})},76274:()=>{}}]);
//# sourceMappingURL=src_files-tab_ts-97082953fe61c4f800ef.js.map